<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAYAN - Admin Dashboard (Updated 2026)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background-color: #f0f4f8; font-family: 'Segoe UI', sans-serif; }
        .sidebar {
            background: linear-gradient(180deg, #1e3a8a, #111827);
            color: white;
            height: 100vh;
            padding: 1.5rem;
            position: fixed;
            width: 260px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
        }
        .sidebar .nav-link { color: #cbd5e1; }
        .sidebar .nav-link:hover, .sidebar .nav-link.active { color: white; background: rgba(255,255,255,0.15); border-radius: 8px; }
        .content { margin-left: 260px; padding: 2rem; }
        .card { border: none; border-radius: 12px; overflow: hidden; box-shadow: 0 6px 20px rgba(0,0,0,0.08); transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .card-header { background: #2563eb; color: white; font-weight: 600; }
        .stat-card { border-left: 5px solid; }
        .error-log { background: #fee2e2; border-left: 5px solid #dc2626; }
        @media (max-width: 992px) {
            .sidebar { width: 100%; height: auto; position: relative; }
            .content { margin-left: 0; }
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="sidebar">
            <h4 class="text-center mb-5">NAYAN Admin</h4>
            <ul class="nav flex-column">
                <li><a class="nav-link active" href="#analytics">Analytics</a></li>
                <li><a class="nav-link" href="#users">User Manager</a></li>
                <li><a class="nav-link" href="#labours">Manage Labours</a></li>
                <li><a class="nav-link" href="#applications">Pending Applications</a></li>
                <li><a class="nav-link" href="#subscriptions">Subscriptions</a></li>
                <li><a class="nav-link" href="#payments">Payment History</a></li>
                <li><a class="nav-link" href="#categories">Categories</a></li>
                <li><a class="nav-link" href="#errors">AI Error Monitoring</a></li>
                <li class="mt-5"><a class="nav-link text-danger" href="index.html">Logout</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <h2 class="mb-4">Dashboard Overview - Samrat</h2>

            <!-- 1. Analytics -->
            <section id="analytics" class="mb-5">
                <div class="row g-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="card stat-card bg-primary text-white">
                            <div class="card-body">
                                <h6>Total Users</h6>
                                <h3>2,847</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card stat-card bg-success text-white">
                            <div class="card-body">
                                <h6>Active Labours</h6>
                                <h3>612</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card stat-card bg-info text-white">
                            <div class="card-body">
                                <h6>Monthly Revenue</h6>
                                <h3>₹3,42,890</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card stat-card bg-warning text-dark">
                            <div class="card-body">
                                <h6>Pending Requests</h6>
                                <h3>47</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mt-4">
                    <div class="card-header">Platform Growth (Last 60 Days)</div>
                    <div class="card-body">
                        <canvas id="growthChart" height="100"></canvas>
                    </div>
                </div>
            </section>

            <!-- 6. User Manager -->
            <section id="users" class="mb-5">
                <div class="card">
                    <div class="card-header">User Management</div>
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" id="userSearch" placeholder="Search by name, phone or email...">
                            <button class="btn btn-outline-primary">Search</button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>Location</th>
                                        <th>Joined</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Riya Banerjee</td>
                                        <td>+91 98765 43210</td>
                                        <td>Kolkata</td>
                                        <td>12 Jan 2026</td>
                                        <td><button class="btn btn-sm btn-info">View</button></td>
                                    </tr>
                                    <!-- আরও rows backend থেকে আসবে -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Pending Artisan Applications Section -->
<section id="applications" class="mb-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Pending Artisan Applications</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Experience</th>
                            <th>Area</th>
                            <th>Fee (₹/hr)</th>
                            <th>Photo</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="pendingList">
                        <!-- ডায়নামিক রো যাবে -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

            <!-- 2,3,5. Subscriptions + Payment History + Category (সংক্ষেপে) -->
            <section id="subscriptions" class="mb-5">
                <div class="card">
                    <div class="card-header">Subscription & Category Management</div>
                    <div class="card-body">
                        <!-- Subscription Fee Change -->
                        <div class="mb-4">
                            <h6>Change Subscription Fee</h6>
                            <div class="input-group">
                                <input type="number" class="form-control" id="newFee" placeholder="New Amount (INR)" min="99">
                                <button class="btn btn-primary" onclick="updateFee()">Update</button>
                            </div>
                        </div>

                        <!-- Add Category -->
                        <div class="mb-4">
                            <h6>Add New Category</h6>
                            <div class="input-group">
                                <input type="text" class="form-control" id="newCat" placeholder="e.g. Makeup Artist, Painter">
                                <button class="btn btn-success" onclick="addCategory()">Add</button>
                            </div>
                        </div>

                        <!-- Subscribed Filter -->
                        <h6>Filter Subscribed Labours</h6>
                        <select class="form-select mb-3" id="subFilter" onchange="filterSubscribed()">
                            <option value="all">All</option>
                            <option value="yes">Subscribed Only</option>
                            <option value="no">Not Subscribed</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- 5. Payment History -->
            <section id="payments" class="mb-5">
                <div class="card">
                    <div class="card-header">Payment History</div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Labour</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Txn ID</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>14 Jan 2026</td>
                                    <td>Amit Roy</td>
                                    <td>₹499</td>
                                    <td><span class="badge bg-success">Success</span></td>
                                    <td>TXN987654</td>
                                </tr>
                                <!-- Dynamic -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 7. AI Error Monitoring (সিমুলেটেড) -->
            <section id="errors">
                <div class="card error-log">
                    <div class="card-header">AI Website Fault Monitoring</div>
                    <div class="card-body">
                        <p><strong>Current Status:</strong> No critical errors detected (Last check: 14 Jan 2026 16:45 IST)</p>
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-warning">Warning: Slow loading on mobile (Kolkata region) - 3.8s</li>
                            <li class="list-group-item">Info: Login API response time normal</li>
                            <li class="list-group-item">Info: Payment gateway 100% uptime today</li>
                        </ul>
                        <button class="btn btn-danger mt-3">View Full Logs</button>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<script>
    // Analytics Chart
    new Chart(document.getElementById('growthChart'), {
        type: 'line',
        data: {
            labels: ['Dec 1', 'Dec 15', 'Jan 1', 'Jan 14'],
            datasets: [
                { label: 'New Users', data: [180, 320, 480, 620], borderColor: '#2563eb' },
                { label: 'New Labours', data: [45, 92, 150, 210], borderColor: '#16a34a' }
            ]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' } } }
    });

    // Simple functions (real implementation needs backend)
    function updateFee() { alert('Subscription fee updated!'); }
    function addCategory() { alert('New category added successfully!'); }
    function filterSubscribed() { alert('Filtering applied... (backend call in real app)'); }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
// সিমুলেটেড Pending Applications (পরে ব্যাকএন্ড থেকে আসবে)
const pendingApplications = [
    {
        id: 1,
        name: "রাহুল দাস",
        category: "Plumber",
        experience: "8 years",
        area: "Howrah, Shibpur",
        fee: 450,
        photo: "https://via.placeholder.com/80?text=Rahul",
        status: "pending"
    },
    {
        id: 2,
        name: "প্রিয়াঙ্কা সেন",
        category: "Makeup Artist",
        experience: "5 years",
        area: "Kolkata, Salt Lake",
        fee: 800,
        photo: "https://via.placeholder.com/80?text=Priyanka",
        status: "pending"
    },
    {
        id: 3,
        name: "সৌম্য চ্যাটার্জী",
        category: "Painter",
        experience: "10 years",
        area: "Kolkata, Dumdum",
        fee: 400,
        photo: "https://via.placeholder.com/80?text=Saumya",
        status: "pending"
    }
];

// Pending লিস্ট লোড করার ফাংশন
function loadPendingApplications() {
    const tbody = document.getElementById('pendingList');
    if (!tbody) return; // যদি টেবিল না থাকে তাহলে স্কিপ

    tbody.innerHTML = '';

    pendingApplications.forEach(app => {
        const row = `
            <tr>
                <td>${app.name}</td>
                <td>${app.category}</td>
                <td>${app.experience}</td>
                <td>${app.area}</td>
                <td>₹${app.fee}</td>
                <td><img src="\( {app.photo}" alt=" \){app.name}" width="60" class="rounded"></td>
                <td>
                    <button class="btn btn-success btn-sm me-2" onclick="acceptApplication(${app.id})">
                        <i class="fas fa-check"></i> Accept
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="rejectApplication(${app.id})">
                        <i class="fas fa-times"></i> Reject
                    </button>
                </td>
            </tr>
        `;
        tbody.innerHTML += row;
    });
}

// Accept করার ফাংশন
function acceptApplication(id) {
    if (confirm(`আপনি কি ${id} নং আবেদনটি Accept করতে চান?`)) {
        alert(`Application ${id} Accepted! এখন এই Artisan Hire Artisans ক্যাটাগরিতে দেখা যাবে।`);

        // লিস্ট থেকে রিমুভ (সিমুলেশন)
        const index = pendingApplications.findIndex(a => a.id === id);
        if (index !== -1) pendingApplications.splice(index, 1);
        loadPendingApplications();
    }
}

// Reject করার ফাংশন
function rejectApplication(id) {
    if (confirm(`আপনি কি ${id} নং আবেদনটি Reject করতে চান?`)) {
        alert(`Application ${id} Rejected!`);

        const index = pendingApplications.findIndex(a => a.id === id);
        if (index !== -1) pendingApplications.splice(index, 1);
        loadPendingApplications();
    }
}

// পেজ লোড হলে অটোমেটিক লোড হবে
document.addEventListener('DOMContentLoaded', loadPendingApplications);
</script>
</body>
</html>